<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true&key=AIzaSyCS6KlQiaLg37b1BUbKf6iu3Q0TSW5brKw"></script>
<style>
	body,.container {
		margin: 0;
		padding:0;
		width:100%;
		height:100%;
	}
	.searchBtn{
		width: 98%;
		height: 4%;
		padding-top: 1%;
		border:1px solid #000;
		margin:1%;
	}
	#map {
		width: 98%;
		height:900px;
		border:1px solid #000;
		margin:1%;
	  	position: relative;
	}
	label{
		padding-left: 15px;
	}
</style>
	</head>
	<body>
		
		
<div class="container">
	<div class="searchBtn">
		<label><b>机车：</b><span id="train_code"></span></label>
		<label>起始时间：<input id="TextStartTime" value="a"></label>
		<label>结束时间：<input id="TextEndTime" value="a"></label>
		<label><a href="" class="easyui-linkbutton" data-options="iconCls:'icon-search'" id="search" onclick="calcu()">查询</a></label>
	</div>
	<div id="map"></div>
</div>
<script type="text/javascript">
	var directionsDisplay;
	//DirectionsService向路线服务发起请求
	var directionsService = new google.maps.DirectionsService();
	var map;
//	$(function(){
//		createMap();
//		var start = {lat: 36, lng:116};
//		var end = {lat: 35, lng: 119};
//		var request = {
//			origin: start,
//			destination: end,
//			travelMode: 'DRIVING'
//		};
//		// 通过方向服务请求
//		directionsService.route(request, function (result, status) {
//			if (status == 'OK') {
//				// 显示在地图上的路线
//				directionsDisplay.setDirections(result);
//			}
//		});
//
//	});
	//创建地图
	function createMap() {
		//DirectionsRenderer示例，代码出错
		directionsDisplay = new google.maps.DirectionsRenderer();
		var myCenter = new google.maps.LatLng(36,116);

		var mapProp = {
			center: myCenter,
			zoom: 3,
			minZoom: 3,
			maxZoom: 15,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		};

		map = new google.maps.Map(document.getElementById("map"), mapProp);
		directionsDisplay.setMap(map);
	}

	function calcu(){
		var start = {lat: 36, lng:116};
		var end = {lat: 35, lng: 119};
		var request = {
			origin: start,
			destination: end,
			travelMode: 'DRIVING'
		};
		// 通过方向服务请求
		directionsService.route(request, function (result, status) {
			if (status == 'OK') {
				// 显示在地图上的路线
				directionsDisplay.setDirections(result);
			}
		});
	}
	google.maps.event.addListener(window, 'load', createMap);
</script>
		
	</body>
</html>
